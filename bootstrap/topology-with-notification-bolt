{"name":"topology2","id":2,"timestamp":1443490900115, "config":"{\"config\":{\"hbaseConf\":{\"hbase.rootdir\":\"hdfs://localhost:9000/tmp/hbase\"},\"local.parser.jar.path\":\"/tmp\",\"local.notifier.jar.path\":\"/tmp\"},\"dataSources\":[{\"uiname\":\"kafkaDataSource\",\"type\":\"KAFKA\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.KafkaSpoutFluxComponent\",\"config\":{\"zkUrl\":\"localhost:2181\",\"zkPath\":\"/brokers\",\"refreshFreqSecs\":60,\"topic\":\"nest-topic\",\"zkRoot\":\"/Iotas-kafka-spout\",\"spoutConfigId\":\"nest-kafka-spout-config\",\"fetchSizeBytes\":1048576,\"socketTimeoutMs\":10000,\"fetchMaxWait\":10000,\"bufferSizeBytes\":1048576,\"ignoreZkOffsets\":false,\"maxOffsetBehind\":9223372036854775807,\"useStartOffsetTimeIfOffsetOutOfRange\":true,\"metricsTimeBucketSizeInSecs\":60,\"stateUpdateIntervalMs\":2000,\"retryInitialDelayMs\":0,\"retryDelayMultiplier\":1,\"retryDelayMaxMs\":60000,\"parallelism\":1}}],\"processors\":[{\"uiname\":\"parserProcessor\",\"type\":\"PARSER\",\"schemaClass\":\"com.hortonworks.iotas.layout.schema.ParserSchemaEvolver\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ParserBoltFluxComponent\",\"config\":{\"parsedTuplesStream\":\"parsedTuplesStream\",\"failedTuplesStream\":\"failedTuplesStream\",\"parserId\":1,\"dataSourceId\":1,\"parallelism\":1}},{\"uiname\":\"ruleProcessor\",\"type\":\"RULE\",\"schemaClass\":\"com.hortonworks.iotas.layout.schema.RulesProcessorSchemaEvolver\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.RuleBoltFluxComponent\",\"config\":{\"parallelism\":1,\"rulesProcessorConfig\":{\"rules\":[{\"name\":\"rule_1\",\"id\":1,\"ruleProcessorName\":\"rule_processsor_1\",\"condition\":{\"expression\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.BinaryExpression\",\"operator\":\"AND\",\"first\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.BinaryExpression\",\"operator\":\"LESS_THAN\",\"first\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.FieldExpression\",\"value\":{\"name\":\"ambient_temperature_f\",\"type\":\"STRING\",\"optional\":false}},\"second\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.Literal\",\"value\":\"100\"}},\"second\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.BinaryExpression\",\"operator\":\"LESS_THAN\",\"first\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.FieldExpression\",\"value\":{\"name\":\"humidity\",\"type\":\"STRING\",\"optional\":false}},\"second\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.Literal\",\"value\":\"50\"}}}},\"action\":{\"components\":[{\"name\":\"hbasesink\",\"id\":1,\"description\":\"hbasesink\",\"declaredInput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]},{\"name\":\"hdfssink\",\"id\":1,\"description\":\"hdfssink\",\"declaredInput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]},{\"name\":\"notificationsink\",\"id\":1,\"description\":\"notificationsink\",\"declaredInput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]}],\"declaredOutput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]},\"description\":\"rule_1_desc\"},{\"name\":\"rule_2\",\"id\":2,\"ruleProcessorName\":\"rule_processsor_1\",\"condition\":{\"expression\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.BinaryExpression\",\"operator\":\"AND\",\"first\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.BinaryExpression\",\"operator\":\"GREATER_THAN\",\"first\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.FieldExpression\",\"value\":{\"name\":\"ambient_temperature_f\",\"type\":\"STRING\",\"optional\":false}},\"second\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.Literal\",\"value\":\"100\"}},\"second\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.BinaryExpression\",\"operator\":\"GREATER_THAN\",\"first\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.FieldExpression\",\"value\":{\"name\":\"humidity\",\"type\":\"STRING\",\"optional\":false}},\"second\":{\"class\":\"com.hortonworks.iotas.layout.design.rule.condition.Literal\",\"value\":\"50\"}}}},\"action\":{\"components\":[{\"name\":\"hbasesink\",\"id\":1,\"description\":\"hbasesink\",\"declaredInput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]},{\"name\":\"hdfssink\",\"id\":1,\"description\":\"hdfssink\",\"declaredInput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]},{\"name\":\"notificationsink\",\"id\":1,\"description\":\"notificationsink\",\"declaredInput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]}],\"declaredOutput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]},\"description\":\"rule_2_desc\"}],\"name\":\"rule_processsor_1\",\"id\":1,\"description\":\"rule_processsor_1_desc\",\"declaredInput\":[{\"name\":\"temperature\",\"type\":\"INTEGER\"},{\"name\":\"humidity\",\"type\":\"INTEGER\"}]}}}],\"dataSinks\":[{\"uiname\":\"hbasesink\",\"type\":\"HBASE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.HbaseBoltFluxComponent\",\"config\":{\"configKey\":\"hbaseConf\",\"table\":\"nest\",\"columnFamily\":\"cf\",\"parallelism\":1}},{\"uiname\":\"hdfssink\",\"type\":\"HDFS\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.HdfsBoltFluxComponent\",\"config\":{\"fsUrl\":\"hdfs://localhost:9000\",\"configKey\":\"hdfsConf\",\"path\":\"/tmp/failed-tuples\",\"prefix\":\"data\",\"extension\":\"dat\",\"countPolicyValue\":1,\"rotationInterval\":10,\"rotationIntervalUnit\":\"SECONDS\",\"parallelism\":1}},{\"uiname\":\"notificationsink\",\"type\":\"NOTIFICATION\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.NotificationBoltFluxComponent\",\"config\":{\"notifierName\":\"email_notifier\",\"jarFileName\":\"notifiers.jar\",\"className\":\"com.hortonworks.iotas.notification.notifiers.EmailNotifier\",\"properties\":{\"username\":\"hwemailtest@gmail.com\",\"password\":\"testing12\",\"host\":\"smtp.gmail.com\",\"port\":587,\"starttls\":true,\"debug\":true,\"ssl\":false,\"auth\":true,\"protocol\":\"smtp\"},\"fieldValues\":{\"from\":\"hwemailtest@gmail.com\",\"to\":\"hwemailtest@gmail.com\",\"subject\":\"Testing email notifications\",\"contentType\":\"text/plain\",\"body\":\"default body\"},\"parallelism\":1}}],\"links\":[{\"uiname\":\"kafkaDataSource->parserProcessor\",\"type\":\"SHUFFLE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ShuffleGroupingLinkFluxComponent\",\"config\":{\"from\":\"kafkaDataSource\",\"to\":\"parserProcessor\"}},{\"uiname\":\"parserProcessor-parsedTuples->ruleProcessor\",\"type\":\"SHUFFLE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ShuffleGroupingLinkFluxComponent\",\"config\":{\"from\":\"parserProcessor\",\"to\":\"ruleProcessor\",\"streamId\":\"parsedTuplesStream\"}},{\"uiname\":\"ruleProcessor-rule1->hbasesink\",\"type\":\"SHUFFLE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ShuffleGroupingLinkFluxComponent\",\"config\":{\"from\":\"ruleProcessor\",\"to\":\"hbasesink\",\"streamId\":\"rule_processsor_1.rule_1.1\"}},{\"uiname\":\"ruleProcessor-rule2->hbasesink\",\"type\":\"SHUFFLE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ShuffleGroupingLinkFluxComponent\",\"config\":{\"from\":\"ruleProcessor\",\"to\":\"hbasesink\",\"streamId\":\"rule_processsor_1.rule_2.2\"}},{\"uiname\":\"ruleProcessor-rule1->notificationsink\",\"type\":\"SHUFFLE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ShuffleGroupingLinkFluxComponent\",\"config\":{\"from\":\"ruleProcessor\",\"to\":\"notificationsink\",\"streamId\":\"rule_processsor_1.rule_1.1\"}},{\"uiname\":\"ruleProcessor-rule2->notificationsink\",\"type\":\"SHUFFLE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ShuffleGroupingLinkFluxComponent\",\"config\":{\"from\":\"ruleProcessor\",\"to\":\"notificationsink\",\"streamId\":\"rule_processsor_1.rule_2.2\"}},{\"uiname\":\"parserProcessor-failedTuples->hdfssink\",\"type\":\"SHUFFLE\",\"transformationClass\":\"com.hortonworks.iotas.topology.storm.ShuffleGroupingLinkFluxComponent\",\"config\":{\"from\":\"parserProcessor\",\"to\":\"hdfssink\",\"streamId\":\"failedTuplesStream\"}}]}"}